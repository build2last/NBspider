<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Ncspider by build2last</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Ncspider</h1>
      <h2 class="project-tagline">中文门户网站新闻和评论抓取。Powered by scrapy.</h2>
      <a href="https://github.com/build2last/NCspider" class="btn">View on GitHub</a>
      <a href="https://github.com/build2last/NCspider/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/build2last/NCspider/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="ncspider--项目简介" class="anchor" href="#ncspider--%E9%A1%B9%E7%9B%AE%E7%AE%80%E4%BB%8B" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>NCspider  项目简介</h1>

<h2>
<a id="中文门户网站新闻和评论抓取" class="anchor" href="#%E4%B8%AD%E6%96%87%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99%E6%96%B0%E9%97%BB%E5%92%8C%E8%AF%84%E8%AE%BA%E6%8A%93%E5%8F%96" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>中文门户网站新闻和评论抓取。</h2>

<p>A Python Project</p>

<h3>
<a id="编写目的" class="anchor" href="#%E7%BC%96%E5%86%99%E7%9B%AE%E7%9A%84" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>编写目的</h3>

<ul>
<li>获取门户网站原始新闻及评论素材，结构化存储后，为分析舆情提供数据基础。 </li>
<li>门户网站新闻有着微博不可替代的一些特点。 </li>
<li>请参考配置说明，为了方便展示，可以结合django建立数据库</li>
<li>只需要爬虫的话建立database后修改settings.py相应参数就好了</li>
<li>对于网页的解析只用了re正则解析（快过Beautiful Soup）</li>
<li>爬虫 news 可以单独使用，暂时只提供mysql支持</li>
</ul>

<h2>
<a id="简单介绍" class="anchor" href="#%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>简单介绍</h2>

<ul>
<li>包括新浪新闻门户，腾讯新闻门户，搜狐新闻（移动端)<strong>新闻</strong>以及<strong>评论</strong>
</li>
<li>每日新闻数量上千，评论数量级数十万</li>
</ul>

<h3>
<a id="从零开始配置运行环境---way-to-insatll-scrapy-on-ubuntu" class="anchor" href="#%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E9%85%8D%E7%BD%AE%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83---way-to-insatll-scrapy-on-ubuntu" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>从零开始配置运行环境---Way to insatll scrapy on ubuntu</h3>

<ol>
<li>sudo apt-get install libxml2-dev libxslt1-dev</li>
<li>sudo apt-get install python-dev</li>
<li>sudo apt-get install libssl-dev </li>
<li>sudo apt-get install libffi-dev</li>
<li>pip install -r requirements.txt</li>
</ol>

<h3>
<a id="数据库使用" class="anchor" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BD%BF%E7%94%A8" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>数据库使用</h3>

<ol>
<li>更改<strong>settings.py</strong>适应你的本地化，数据库的相关设置,或者在 pipeline中修改相关参数</li>
<li>做了一个匹配的Django models模型方便了解,查看<a href="https://github.com/build2last/NCspider/blob/master/pubopin/news_opin/models.py">数据模型</a>
</li>
</ol>

<h3>
<a id="使用命令" class="anchor" href="#%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>使用命令</h3>

<ul>
<li>/news$ scrapy allstart   即可运行所有爬虫</li>
<li>/news$ scrapy crawl sina</li>
<li>/news$ scrapy crawl tencent</li>
<li>/news$ scrapy crawl sohu</li>
</ul>

<h3>
<a id="配套系统" class="anchor" href="#%E9%85%8D%E5%A5%97%E7%B3%BB%E7%BB%9F" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>配套系统</h3>

<pre><code>python 2.7
Mysql 
Scrapy 1.0
</code></pre>

<h3>
<a id="测试" class="anchor" href="#%E6%B5%8B%E8%AF%95" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>测试</h3>

<pre><code>Linux Ubuntu 14.04 tested
Windows 10 tested
</code></pre>

<h2>
<a id="问题说明" class="anchor" href="#%E9%97%AE%E9%A2%98%E8%AF%B4%E6%98%8E" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>问题说明：</h2>

<ol>
<li>编码问题：

<ul>
<li>中文网页：对中文的解析需要特别注意编码问题，utf-8是多数，但有时网站会采用GBK,GBK2312等编码格式。</li>
<li>数据库编码：出现了一大堆乱七八糟的文字，可以怀疑数据库字段编码跟内容编码不一致。</li>
</ul>
</li>
<li>利用django建立数据库时会有一些被默认的参数可能会被忽略，比如说数据项默认为非空 not null = true,所以说：使用前请认真阅读document</li>
</ol>

<h3>
<a id="to-do-list" class="anchor" href="#to-do-list" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>To do list：</h3>

<ul>
<li>抓的更全</li>
<li>code review，运行更高效</li>
<li>scrapy是一个优秀的爬虫框架，结构合理，提供多线程，以后随着学习的深入会试着将更多成果运用进来。</li>
<li>支持更多数据库类型，包括 NoSQL</li>
<li>HTML cache</li>
</ul>

<h2>
<a id="声明" class="anchor" href="#%E5%A3%B0%E6%98%8E" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>声明</h2>

<ul>
<li>Email：<strong><a href="mailto:lancelotdev@163.com">lancelotdev@163.com</a></strong>
</li>
<li>Author：liu kun</li>
<li>Last-Modified：2016-10</li>
</ul>

<h3>
<a id="project-journal" class="anchor" href="#project-journal" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>project journal</h3>

<h4>
<a id="2016-10-12" class="anchor" href="#2016-10-12" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>2016-10-12</h4>

<p>项目答辩出奇顺利，因为确实下功夫了，洗澡去了，再见！</p>

<p>楼下『加油』震天响</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/build2last/NCspider">Ncspider</a> is maintained by <a href="https://github.com/build2last">build2last</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
